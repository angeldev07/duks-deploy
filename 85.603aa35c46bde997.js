"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[85],{8085:(_e,P,c)=>{c.r(P),c.d(P,{INVENTORY_ROUTES:()=>me});var g=c(6814),e=c(9467),d=c(707),m=c(4844),p=c(7474),C=c(7213),r=c(95),v=c(3714),x=c(4819),_=c(5609),y=c(3968),u=c(5219);function T(o,l){1&o&&(e.TgZ(0,"span",14),e._uU(1,"El nombre es obligatorio"),e.qZA())}function A(o,l){1&o&&(e.TgZ(0,"span",14),e._uU(1,"El precio base es obligatorio y mayor a $2500"),e.qZA())}function U(o,l){1&o&&(e.TgZ(0,"span",14),e._uU(1,"La categoria es obligatoria"),e.qZA())}function S(o,l){1&o&&(e.TgZ(0,"span",14),e._uU(1,"La imagen es obligatoria"),e.qZA())}function w(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",15)(1,"p-button",16),e.NdJ("onClick",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.submitProduct())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.s9C("label",t.product?"Actualizar":"Guardar"),e.Q6J("autofocus",!0)}}const N=()=>({width:"50rem"}),q=()=>({"1199px":"75vw","575px":"90vw"});let J=(()=>{class o{constructor(t){this.fb=t,this.product=null,this.categories=[],this.visibleChange=new e.vpe,this.saveProduct=new e.vpe,this.productForm=this.fb.group({name:["",[r.kI.required]],basePrice:[0,[r.kI.required,r.kI.min(2500)]],active:[!0,[r.kI.required]],category:["",[r.kI.required]]}),this.img=null,this.imgError=!1}ngOnInit(){this.product&&(this.productForm.patchValue({name:this.product.name,basePrice:this.product.basePrice,active:this.product.active,category:this.product.category?this.product.category.name:""}),this.img=this.product.profileImg)}validateInput(t){return this.productForm.get(t).invalid&&this.productForm.get(t).touched}submitProduct(){if(this.productForm.invalid)return this.productForm.markAllAsTouched(),this.productForm.markAsDirty(),void(this.img||(this.imgError=!0));if(!this.img)return void(this.imgError=!0);const t={id:this.product?.id||-1,name:this.productForm.get("name").value,basePrice:Number(this.productForm.get("basePrice").value),amount:0,active:!!this.productForm.get("active").value,category:JSON.parse(JSON.stringify(this.productForm.get("category").value)),profileImg:this.img||null};this.saveProduct.emit(t),this.visibleChange.emit(!1)}getImg(t){const i=t.target.files[0];if(i){const a=new FileReader;a.onload=()=>{this.img=a.result},a.readAsDataURL(i),this.imgError=!1}}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(r.qu))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-update-product"]],inputs:{product:"product",visible:"visible",categories:"categories"},outputs:{visibleChange:"visibleChange",saveProduct:"saveProduct"},standalone:!0,features:[e.jDz],decls:27,vars:17,consts:[[3,"header","modal","draggable","resizable","visible","breakpoints","visibleChange","onHide"],[1,"pt-4",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","name",1,"font-semibold","block","mb-2"],["id","name","type","text","formControlName","name","pInputText","",1,"w-full"],["class","text-red-500 text-md block p-2"],["for","basePrice",1,"font-semibold","block","mb-2"],["id","basePrice","type","number","formControlName","basePrice","pInputText","",1,"w-full"],["for","active",1,"font-semibold","block","mb-2"],["formControlName","category","optionLabel","name","placeholder","Seleccione la categoria",3,"options","styleClass"],["for","img",1,"font-semibold","block","mb-2"],["type","file","accept","image/*",3,"input"],["formControlName","active"],["pTemplate","footer"],[1,"text-red-500","text-md","block","p-2"],[1,"pt-3"],["icon","pi pi-check","iconPos","right","pAutoFocus","",3,"label","autofocus","onClick"]],template:function(i,a){1&i&&(e.TgZ(0,"p-dialog",0),e.NdJ("visibleChange",function(n){return a.visible=n})("onHide",function(){return a.visibleChange.emit(!1)}),e.TgZ(1,"form",1),e.NdJ("ngSubmit",function(){return a.submitProduct()}),e.TgZ(2,"div",2)(3,"label",3),e._uU(4,"Nombre"),e.qZA(),e._UZ(5,"input",4),e.YNc(6,T,2,0,"span",5),e.qZA(),e.TgZ(7,"div",2)(8,"label",6),e._uU(9,"Precio base"),e.qZA(),e._UZ(10,"input",7),e.YNc(11,A,2,0,"span",5),e.qZA(),e.TgZ(12,"div",2)(13,"label",8),e._uU(14,"Categoria"),e.qZA(),e._UZ(15,"p-dropdown",9),e.YNc(16,U,2,0,"span",5),e.qZA(),e.TgZ(17,"div",2)(18,"label",10),e._uU(19,"Seleccionar imagen"),e.qZA(),e.TgZ(20,"input",11),e.NdJ("input",function(n){return a.getImg(n)}),e.qZA(),e.YNc(21,S,2,0,"span",5),e.qZA(),e.TgZ(22,"div",2)(23,"label",8),e._uU(24,"Activo"),e.qZA(),e._UZ(25,"p-inputSwitch",12),e.qZA()(),e.YNc(26,w,2,2,"ng-template",13),e.qZA()),2&i&&(e.Akn(e.DdM(15,N)),e.s9C("header",a.product?"Actualizar producto":"Agregar nuevo producto"),e.Q6J("modal",!0)("draggable",!1)("resizable",!1)("visible",a.visible)("breakpoints",e.DdM(16,q)),e.xp6(1),e.Q6J("formGroup",a.productForm),e.xp6(5),e.um2(6,a.validateInput("name")?6:-1),e.xp6(5),e.um2(11,a.validateInput("basePrice")?11:-1),e.xp6(4),e.Q6J("options",a.categories)("styleClass","w-full"),e.xp6(1),e.um2(16,a.validateInput("category")?16:-1),e.xp6(5),e.um2(21,a.imgError?21:-1))},dependencies:[g.ez,C.S,C.V,u.jx,v.j,v.o,r.UX,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.sg,r.u,x.O,d.zx,_.Iu,_.Ql,y.kW,y.Lt],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return o})();var F=c(9410),f=c(4104),I=c(7030);function L(o,l){if(1&o&&e._UZ(0,"app-products-list",15),2&o){const t=e.oxw();e.Q6J("products",t.activeProducts)}}function D(o,l){if(1&o&&e._UZ(0,"app-products-list",15),2&o){const t=e.oxw();e.Q6J("products",t.disabledProducts)}}function k(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"app-add-update-product",16),e.NdJ("saveProduct",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.saveProduct(a))})("visibleChange",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.clear(a))}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("visible",t.openAddProductDialog)("categories",t.categories().slice(1,t.categories().length))("product",t.selectedProduct())}}const z=()=>({name:"Eliminar"}),M=o=>[o];let O=(()=>{class o{constructor(t,i){this.productService=t,this.messageService=i,this.openAddProductDialog=!1,this.productList=(0,e.tdS)([]),this.categories=(0,e.tdS)([{id:-1,name:"Todo",active:!0}]),this.selectedCategory=(0,e.tdS)(null),this.selectedProduct=(0,e.tdS)(null)}ngOnInit(){this.getProducts(),this.getCategories()}get activeProducts(){return this.productList().filter(t=>t.active)}get disabledProducts(){return this.productList().filter(t=>!t.active)}get filteredProducts(){return this.productList().filter(t=>null===this.selectedCategory()||"Todo"===this.selectedCategory().name||t.category?.id===this.selectedCategory().id)}applyFilter(t){const{value:i}=t;this.selectedCategory.set(i)}getProducts(){this.productService.getProducts().subscribe({next:t=>{this.productList.set(t)},error:t=>{console.log(t)}})}getCategories(){this.productService.getCategories().subscribe({next:t=>{this.categories.update(i=>[...i,...t])}})}saveProduct(t){-1===t.id?this.saveNewProduct(t):this.updateProduct(t)}saveNewProduct(t){this.productService.saveProduct({name:t.name,basePrice:t.basePrice,amount:t.amount,active:t.active,category:t.category,profileImg:t.profileImg}).subscribe({next:()=>{this.getProducts(),this.messageService.clear(),this.messageService.add({severity:"success",summary:"Agregado",detail:"Se ha agregado el producto con \xe9xito"})},error:a=>{this.messageService.clear(),this.messageService.add({severity:"error",summary:"Error :(",detail:"Ha ocurrido un error inesperado. Intentelo de nuevo"}),console.log(a)}})}deleteProduct(t){this.productService.deleteProduct(t).subscribe({next:()=>{this.getProducts(),this.messageService.clear(),this.messageService.add({severity:"success",summary:"Eliminado",detail:"Se ha eliminado el producto con \xe9xito"})},error:i=>{this.messageService.clear(),this.messageService.add({severity:"error",summary:"Error :(",detail:"Ha ocurrido un error inesperado. Intentelo de nuevo"}),console.log(i)}})}updateProduct(t){this.productService.updateProduct(t).subscribe({next:()=>{this.getProducts(),this.messageService.clear(),this.messageService.add({severity:"success",summary:"Actualizado",detail:"Se ha actualizado el producto con \xe9xito"})},error:i=>{this.messageService.clear(),this.messageService.add({severity:"error",summary:"Error :(",detail:"Ha ocurrido un error inesperado. Intentelo de nuevo"}),console.log(i)}})}setDeleteProductsList(t){this.selectedProduct.set(t)}deleteProductsList(t){this.productService.deleteProductsByList(t).subscribe({next:()=>{this.getProducts()},error:i=>{this.messageService.clear(),this.messageService.add({severity:"success",summary:"Elimados",detail:"Se han eliminado los productos seleccionados con \xe9xito"}),console.log(i)}})}clear(t){this.openAddProductDialog=!1,this.selectedProduct.set(null)}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(I.U),e.Y36(u.ez))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-products"]],standalone:!0,features:[e._Bn([u.ez]),e.jDz],decls:24,vars:11,consts:[[1,"card","flex","justify-content-between","align-items-center","px-4"],[1,"mb-0","text-2xl","md:text-3xl"],["label","Agregar","icon","pi pi-plus",3,"iconPos","outlined","onClick"],[1,"mb-4","formgrid","grid"],[1,"field","col","md:col-6","flex","flex-column"],[1,"text-md","mb-0"],["optionLabel","name","placeholder","Accion por lote",3,"options","styleClass","onChange"],[1,"text-md","mb-0","md:text-right"],["optionLabel","name","placeholder","Seleccionar categoria",3,"options","styleClass","onChange"],["header","Listado"],[3,"products","deleteProduct","updateProduct","deleteProducts"],["header","Activos"],["pTemplate","content"],["header","Deshabilitados"],[3,"visible","categories","product"],[3,"products"],[3,"visible","categories","product","saveProduct","visibleChange"]],template:function(i,a){1&i&&(e.TgZ(0,"main")(1,"section",0)(2,"h2",1),e._uU(3,"Productos"),e.qZA(),e.TgZ(4,"p-button",2),e.NdJ("onClick",function(){return a.openAddProductDialog=!0}),e.qZA()(),e.TgZ(5,"section")(6,"div",3)(7,"div",4)(8,"p",5),e._uU(9,"Accion por lote"),e.qZA(),e.TgZ(10,"p-dropdown",6),e.NdJ("onChange",function(n){return a.deleteProductsList(n)}),e.qZA()(),e.TgZ(11,"div",4)(12,"p",7),e._uU(13," Seleccionar categoria "),e.qZA(),e.TgZ(14,"p-dropdown",8),e.NdJ("onChange",function(n){return a.applyFilter(n)}),e.qZA()()(),e.TgZ(15,"p-tabView")(16,"p-tabPanel",9)(17,"app-products-list",10),e.NdJ("deleteProduct",function(n){return a.deleteProduct(n)})("updateProduct",function(n){return a.selectedProduct.set(n),a.openAddProductDialog=!0})("deleteProducts",function(n){return a.setDeleteProductsList(n)}),e.qZA()(),e.TgZ(18,"p-tabPanel",11),e.YNc(19,L,1,1,"ng-template",12),e.qZA(),e.TgZ(20,"p-tabPanel",13),e.YNc(21,D,1,1,"ng-template",12),e.qZA()()(),e.YNc(22,k,1,3,"app-add-update-product",14),e._UZ(23,"p-toast"),e.qZA()),2&i&&(e.xp6(4),e.Q6J("iconPos","right")("outlined",!0),e.xp6(6),e.Q6J("options",e.VKq(9,M,e.DdM(8,z)))("styleClass","w-full"),e.xp6(4),e.Q6J("options",a.categories())("styleClass","w-full"),e.xp6(3),e.Q6J("products",a.filteredProducts),e.xp6(5),e.um2(22,a.openAddProductDialog?22:-1))},dependencies:[g.ez,d.hJ,d.zx,u.jx,m.LU,m.xf,m.x4,p.U$,y.kW,y.Lt,J,F.o,r.u5,f.EV,f.FN],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return o})();var b=c(9502);function Q(o,l){1&o&&(e.TgZ(0,"tr")(1,"th",3),e._uU(2,"ID "),e._UZ(3,"p-sortIcon",4),e.qZA(),e.TgZ(4,"th",5),e._uU(5,"Producto "),e._UZ(6,"p-sortIcon",6),e.qZA(),e.TgZ(7,"th",7),e._uU(8,"Activo "),e._UZ(9,"p-sortIcon",8),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Acciones"),e.qZA()())}function Y(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"p-inputSwitch",9),e.NdJ("ngModelChange",function(a){e.CHM(t);const s=e.oxw().$implicit;return e.KtG(s.active=a)})("onChange",function(){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s.activeChange.emit(a))}),e.qZA()(),e.TgZ(7,"td")(8,"button",10),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s.updateCategory.emit(a))}),e.qZA(),e.TgZ(9,"button",11),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s.deleteCategory.emit(a))}),e.qZA()()()}if(2&o){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Q6J("ngModel",t.active)}}function E(o,l){if(1&o&&e.YNc(0,Y,10,3,"tr"),2&o){const t=e.oxw(2);e.um2(0,t.categories.length>0?0:-1)}}const j=()=>({"min-width":"50rem"}),H=()=>[5,10,20],$=()=>["name"];function G(o,l){if(1&o&&(e.TgZ(0,"p-table",0),e.YNc(1,Q,12,0,"ng-template",1)(2,E,1,1,"ng-template",2),e.qZA()),2&o){const t=e.oxw();e.Q6J("value",t.categories)("tableStyle",e.DdM(7,j))("paginator",!0)("rows",5)("selectionPageOnly",!0)("rowsPerPageOptions",e.DdM(8,H))("globalFilterFields",e.DdM(9,$))}}function V(o,l){if(1&o&&e._UZ(0,"p-messages",12),2&o){const t=e.oxw();e.Q6J("value",t.messages)("enableService",!1)("closable",!1)}}let K=(()=>{class o{constructor(){this.categories=[],this.deleteCategory=new e.vpe,this.updateCategory=new e.vpe,this.activeChange=new e.vpe,this.messages=[{severity:"info",summary:"Lista vacia",detail:"No hay categorias por mostrar"}]}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-categories-list"]],inputs:{categories:"categories"},outputs:{deleteCategory:"deleteCategory",updateCategory:"updateCategory",activeChange:"activeChange"},standalone:!0,features:[e.jDz],decls:2,vars:1,consts:[["styleClass","p-datatable-striped",3,"value","tableStyle","paginator","rows","selectionPageOnly","rowsPerPageOptions","globalFilterFields"],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","id"],["field","id"],["pSortableColumn","name"],["field","name"],["pSortableColumn","active"],["field","active"],[3,"ngModel","ngModelChange","onChange"],["pButton","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success",3,"click"],["pButton","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger",3,"click"],[3,"value","enableService","closable"]],template:function(i,a){1&i&&e.YNc(0,G,3,10,"p-table",0)(1,V,1,3),2&i&&e.um2(0,a.categories.length>0?0:1)},dependencies:[g.ez,p.U$,p.iA,u.jx,p.lQ,p.fz,b.$,b.V,d.hJ,d.Hq,_.Iu,_.Ql,r.u5,r.JJ,r.On],styles:["td[_ngcontent-%COMP%], th[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{text-align:center!important}"],changeDetection:0})}return o})();function B(o,l){1&o&&(e.TgZ(0,"span",9),e._uU(1,"El nombre es obligatorio"),e.qZA())}function R(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",10)(1,"p-button",11),e.NdJ("onClick",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.submitCategory())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.s9C("label",t.category?"Actualizar":"Guardar"),e.Q6J("autofocus",!0)}}const X=()=>({width:"35rem"}),W=o=>({"ng-dirty ng-invalid":o});let ee=(()=>{class o{constructor(t){this.fb=t,this.category=null,this.visibleChange=new e.vpe,this.saveCategory=new e.vpe,this.categoryForm=this.fb.group({name:["",r.kI.required],active:[!0,r.kI.required]})}ngOnInit(){this.category&&this.categoryForm.patchValue({name:this.category.name,active:this.category.active})}get name(){return this.categoryForm.get("name")}get active(){return this.categoryForm.get("active")}errorByControl(t){return this.categoryForm.get(t)?.invalid&&(this.categoryForm.get(t)?.touched||this.categoryForm.get(t)?.dirty)}submitCategory(){if(this.categoryForm.invalid)return this.categoryForm.markAllAsTouched(),void this.categoryForm.markAsDirty();const t={id:this.category?.id||-1,name:this.categoryForm.get("name").value,active:!!this.categoryForm.get("active").value};this.saveCategory.emit(t),this.visibleChange.emit(!1)}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(r.qu))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-update-cateogry"]],inputs:{category:"category",visible:"visible"},outputs:{visibleChange:"visibleChange",saveCategory:"saveCategory"},standalone:!0,features:[e.jDz],decls:12,vars:13,consts:[[3,"header","modal","draggable","resizable","visible","visibleChange","onHide"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","name",1,"font-semibold","block","mb-2"],["id","name","type","text","formControlName","name","pInputText","",1,"w-full",3,"ngClass"],["class","text-red-500 text-md block p-2"],["for","active",1,"font-semibold","block","mb-2"],["formControlName","active"],["pTemplate","footer"],[1,"text-red-500","text-md","block","p-2"],[1,"pt-3"],["icon","pi pi-check","iconPos","right","pAutoFocus","",3,"label","autofocus","onClick"]],template:function(i,a){1&i&&(e.TgZ(0,"p-dialog",0),e.NdJ("visibleChange",function(n){return a.visible=n})("onHide",function(){return a.visibleChange.emit(!1)}),e.TgZ(1,"form",1),e.NdJ("ngSubmit",function(){return a.submitCategory()}),e.TgZ(2,"div",2)(3,"label",3),e._uU(4,"Nombre"),e.qZA(),e._UZ(5,"input",4),e.YNc(6,B,2,0,"span",5),e.qZA(),e.TgZ(7,"div",2)(8,"label",6),e._uU(9,"Activo"),e.qZA(),e._UZ(10,"p-inputSwitch",7),e.qZA()(),e.YNc(11,R,2,2,"ng-template",8),e.qZA()),2&i&&(e.Akn(e.DdM(10,X)),e.s9C("header",a.category?"Actualizar categoria":"Agregar nuevo categoria"),e.Q6J("modal",!0)("draggable",!1)("resizable",!1)("visible",a.visible),e.xp6(1),e.Q6J("formGroup",a.categoryForm),e.xp6(4),e.Q6J("ngClass",e.VKq(11,W,a.errorByControl("name"))),e.xp6(1),e.um2(6,a.errorByControl("name")?6:-1))},dependencies:[g.ez,g.mk,C.S,C.V,u.jx,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,v.j,v.o,_.Iu,_.Ql,d.hJ,d.zx],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return o})();var Z=c(1474),h=c(553);let te=(()=>{class o{constructor(t){this.http=t}getCategories(){return this.http.get(`${h.N.api}/categories`)}deleteCategory(t){return this.http.delete(`${h.N.api}/categories/delete/${t}`)}activeCategory(t,i){const a=`${h.N.api}/categories/${i?"on":"off"}`,s=(new Z.LE).set("categoryId",t);return this.http.put(a,{},{params:s})}saveCategory(t){return this.http.post(`${h.N.api}/categories/create`,t)}updateCategory(t){return this.http.put(`${h.N.api}/categories/update/${t.id}`,t)}static#e=this.\u0275fac=function(i){return new(i||o)(e.LFG(Z.eN))};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function oe(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"app-add-update-cateogry",6),e.NdJ("visibleChange",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.openAddCategoryDialog=a)})("saveCategory",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.saveCategory(a))}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("visible",t.openAddCategoryDialog)("category",t.selectedCategory())}}let ae=(()=>{class o{constructor(t,i){this.categoryService=t,this.messages=i,this.categoriesList=(0,e.tdS)([]),this.openAddCategoryDialog=!1,this.selectedCategory=(0,e.tdS)(null)}ngOnInit(){this.getCategories()}getCategories(){this.categoryService.getCategories().subscribe({next:t=>{this.categoriesList.set(t),this.messages.clear(),this.messages.add({severity:"success",summary:"Categorias cargadas",detail:"Las categorias se han cargado correctamente"})}})}getCategoriesWithoutMessage(){this.categoryService.getCategories().subscribe({next:t=>{this.categoriesList.set(t)}})}deleteCategory(t){this.categoryService.deleteCategory(t.id).subscribe({next:i=>{this.getCategoriesWithoutMessage(),this.messages.clear(),this.messages.add({severity:"success",summary:"Categoria eliminada",detail:"La categoria se ha eliminado correctamente"})}})}activeChange(t){this.categoryService.activeCategory(t.id,t.active).subscribe({next:i=>{this.getCategoriesWithoutMessage(),this.messages.clear(),this.messages.add({severity:"success",summary:"Categoria actualizada",detail:"La categoria se ha actualizado correctamente"})}})}saveCategory(t){-1===t.id?this.saveNewCategory(t):this.updateProduct(t)}saveNewCategory(t){this.categoryService.saveCategory(t).subscribe({next:i=>{this.getCategoriesWithoutMessage(),this.messages.clear(),this.messages.add({severity:"success",summary:"Categoria guardada",detail:"La categoria se ha guardado correctamente"})}})}updateProduct(t){this.categoryService.updateCategory(t).subscribe({next:()=>{this.getCategoriesWithoutMessage(),this.messages.clear(),this.messages.add({severity:"success",summary:"Actualizado",detail:"Se ha actualizado la categoria con \xe9xito"})},error:i=>{this.messages.clear(),this.messages.add({severity:"error",summary:"Error :(",detail:"Ha ocurrido un error inesperado. Intentelo de nuevo"}),console.log(i)}})}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(te),e.Y36(u.ez))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-categories"]],standalone:!0,features:[e._Bn([u.ez]),e.jDz],decls:11,vars:4,consts:[[1,"card","flex","justify-content-between","align-items-center","px-4"],[1,"mb-0","text-2xl","md:text-3xl"],["label","Agregar","icon","pi pi-plus",3,"iconPos","outlined","onClick"],["header","Listado"],[3,"categories","deleteCategory","activeChange","updateCategory"],[3,"visible","category"],[3,"visible","category","visibleChange","saveCategory"]],template:function(i,a){1&i&&(e.TgZ(0,"main")(1,"section",0)(2,"h2",1),e._uU(3,"Categorias"),e.qZA(),e.TgZ(4,"p-button",2),e.NdJ("onClick",function(){return a.openAddCategoryDialog=!0}),e.qZA()(),e.TgZ(5,"section")(6,"p-tabView")(7,"p-tabPanel",3)(8,"app-categories-list",4),e.NdJ("deleteCategory",function(n){return a.deleteCategory(n)})("activeChange",function(n){return a.activeChange(n)})("updateCategory",function(n){return a.selectedCategory.set(n),a.openAddCategoryDialog=!0}),e.qZA()()()(),e.YNc(9,oe,1,2,"app-add-update-cateogry",5),e._UZ(10,"p-toast"),e.qZA()),2&i&&(e.xp6(4),e.Q6J("iconPos","right")("outlined",!0),e.xp6(4),e.Q6J("categories",a.categoriesList()),e.xp6(1),e.um2(9,a.openAddCategoryDialog?9:-1))},dependencies:[g.ez,d.hJ,d.zx,m.LU,m.xf,m.x4,K,f.EV,f.FN,ee],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return o})();function ie(o,l){1&o&&(e.TgZ(0,"tr")(1,"th",3),e._uU(2,"ID "),e._UZ(3,"p-sortIcon",4),e.qZA(),e.TgZ(4,"th",5),e._uU(5,"Producto "),e._UZ(6,"p-sortIcon",6),e.qZA(),e.TgZ(7,"th",7),e._uU(8,"Precio Base "),e._UZ(9,"p-sortIcon",8),e.qZA(),e.TgZ(10,"th",9),e._uU(11,"Cantidad "),e._UZ(12,"p-sortIcon",10),e.qZA(),e.TgZ(13,"th",11),e._uU(14,"Activo "),e._UZ(15,"p-sortIcon",12),e.qZA(),e.TgZ(16,"th",13),e._uU(17," Categoria "),e._UZ(18,"p-sortIcon",14),e.qZA()())}function se(o,l){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",15),e._UZ(4,"img",16),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.id),e.xp6(2),e.MGl("alt","imagen del productos ",t.name,""),e.Q6J("src",t.profileImg,e.LSH),e.xp6(1),e.hij(" ",t.name," "),e.xp6(2),e.Oqu(t.basePrice),e.xp6(2),e.Oqu(t.amount),e.xp6(2),e.Oqu(t.active?"Si":"No"),e.xp6(2),e.hij(" ",t.category?t.category.name:"Sin categoria"," ")}}function re(o,l){if(1&o&&e.YNc(0,se,14,8,"tr"),2&o){const t=e.oxw(2);e.um2(0,t.products.length>0?0:-1)}}const ne=()=>({"min-width":"50rem"}),ce=()=>[5,10,20],le=()=>["category.name"];function de(o,l){if(1&o&&(e.TgZ(0,"p-table",0),e.YNc(1,ie,19,0,"ng-template",1)(2,re,1,1,"ng-template",2),e.qZA()),2&o){const t=e.oxw();e.Q6J("value",t.products)("tableStyle",e.DdM(7,ne))("paginator",!0)("rows",5)("selectionPageOnly",!0)("rowsPerPageOptions",e.DdM(8,ce))("globalFilterFields",e.DdM(9,le))}}function pe(o,l){if(1&o&&e._UZ(0,"p-messages",17),2&o){const t=e.oxw();e.Q6J("value",t.messages)("enableService",!1)("closable",!1)}}let ue=(()=>{class o{constructor(){this.messages=[{severity:"info",summary:"Lista vacia",detail:"No hay productos por mostrar"}],this.products=[]}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-products-no-category"]],inputs:{products:"products"},standalone:!0,features:[e.jDz],decls:2,vars:1,consts:[["styleClass","p-datatable-striped",3,"value","tableStyle","paginator","rows","selectionPageOnly","rowsPerPageOptions","globalFilterFields"],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","id"],["field","id"],["pSortableColumn","name"],["field","name"],["pSortableColumn","basePrice"],["field","basePrice"],["pSortableColumn","amount"],["field","amount"],["pSortableColumn","active"],["field","active"],["pSortableColumn","category.name"],["field","category.name"],[1,"flex","align-items-center","gap-2"],[1,"w-3rem","h-3rem",3,"src","alt"],[3,"value","enableService","closable"]],template:function(i,a){1&i&&e.YNc(0,de,3,10,"p-table",0)(1,pe,1,3),2&i&&e.um2(0,a.products.length>0?0:1)},dependencies:[g.ez,p.U$,p.iA,u.jx,p.lQ,p.fz,b.$,b.V],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return o})(),ge=(()=>{class o{constructor(t){this.http=t}getStats(){return this.http.get(`${h.N.api}/products/stats`)}static#e=this.\u0275fac=function(i){return new(i||o)(e.LFG(Z.eN))};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();const me=[{path:"productos",component:O},{path:"categorias",component:ae},{path:"revision",component:(()=>{class o{constructor(t){this.revisionService=t,this.stats=(0,e.tdS)({})}ngOnInit(){this.revisionService.getStats().subscribe({next:t=>{this.stats.set(t)}})}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(ge))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-revision"]],standalone:!0,features:[e.jDz],decls:19,vars:3,consts:[[1,"card","flex","justify-content-between","align-items-center","px-4","mb-6"],[1,"mb-0","text-2xl","md:text-3xl"],[1,"card"],[1,"flex","justify-content-between","align-items-center","mb-6"],[1,"mb-0","text-2xl"],[3,"products"]],template:function(i,a){1&i&&(e.TgZ(0,"main")(1,"section",0)(2,"h2",1),e._uU(3,"Revision general"),e.qZA()(),e.TgZ(4,"section",2)(5,"div",3)(6,"h2",4),e._uU(7,"Productos sin categoria"),e.qZA()(),e._UZ(8,"app-products-no-category",5),e.qZA(),e.TgZ(9,"section",2)(10,"div",3)(11,"h2",4),e._uU(12,"Productos bajos de stock"),e.qZA()(),e._UZ(13,"app-products-no-category",5),e.qZA(),e.TgZ(14,"section",2)(15,"div",3)(16,"h2",4),e._uU(17,"Productos desactivados"),e.qZA()(),e._UZ(18,"app-products-no-category",5),e.qZA()()),2&i&&(e.xp6(8),e.Q6J("products",a.stats().productsWithouCategoriesDTOList),e.xp6(5),e.Q6J("products",a.stats().productsLowStock),e.xp6(5),e.Q6J("products",a.stats().productsDeactivate))},dependencies:[g.ez,ue],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return o})()},{path:"**",redirectTo:"productos"}]}}]);