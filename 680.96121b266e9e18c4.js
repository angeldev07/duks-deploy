"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[680],{1680:(ee,_,n)=>{n.r(_),n.d(_,{CUSTOMER_ROUTES:()=>X});var c=n(6814),e=n(9467),d=n(707),a=n(95),C=n(4844),u=n(7474),p=n(5219),h=n(3968),v=n(9502),A=n(1212),g=n(5609),x=n(1474);function U(o,l){1&o&&(e.TgZ(0,"tr")(1,"th",4),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th",5),e._uU(4,"ID "),e._UZ(5,"p-sortIcon",6),e.qZA(),e.TgZ(6,"th",7),e._uU(7,"Nombre "),e._UZ(8,"p-sortIcon",8),e.qZA(),e.TgZ(9,"th",9),e._uU(10,"Apellidos "),e._UZ(11,"p-sortIcon",10),e.qZA(),e.TgZ(12,"th",11),e._uU(13,"Correo "),e._UZ(14,"p-sortIcon",12),e.qZA(),e.TgZ(15,"th",13),e._uU(16,"Documento "),e._UZ(17,"p-sortIcon",14),e.qZA(),e.TgZ(18,"th",15),e._uU(19,"G\xe9nero "),e._UZ(20,"p-sortIcon",16),e.qZA(),e.TgZ(21,"th",17),e._uU(22,"Fecha Nacimiento "),e._UZ(23,"p-sortIcon",18),e.qZA(),e.TgZ(24,"th",19),e._uU(25,"\xdaltima Visita "),e._UZ(26,"p-sortIcon",20),e.qZA(),e.TgZ(27,"th",21),e._uU(28,"Direcci\xf3n Residencia "),e._UZ(29,"p-sortIcon",22),e.qZA(),e.TgZ(30,"th",23),e._uU(31,"Tel\xe9fono "),e._UZ(32,"p-sortIcon",24),e.qZA(),e.TgZ(33,"th",25),e._uU(34,"Activo "),e._UZ(35,"p-sortIcon",26),e.qZA(),e.TgZ(36,"th"),e._uU(37,"Acciones"),e.qZA()())}function y(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"th"),e._UZ(2,"p-tableCheckbox",27),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.ALo(17,"fechaFormato"),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.ALo(20,"fechaFormato"),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA(),e.TgZ(23,"td"),e._uU(24),e.qZA(),e.TgZ(25,"td")(26,"p-inputSwitch",28),e.NdJ("ngModelChange",function(s){e.CHM(t);const r=e.oxw().$implicit;return e.KtG(r.active=s)})("onChange",function(){e.CHM(t);const s=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.activeChange.emit(s))}),e.qZA()(),e.TgZ(27,"td")(28,"button",29),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.updateCustomer.emit(s))}),e.qZA(),e.TgZ(29,"button",30),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.deleteCustomer.emit(s.id))}),e.qZA()()()}if(2&o){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("value",t),e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.lastName),e.xp6(2),e.Oqu(t.email),e.xp6(2),e.Oqu(t.cardId),e.xp6(2),e.Oqu(t.gender),e.xp6(2),e.Oqu(e.lcZ(17,12,t.birthDay)),e.xp6(3),e.Oqu(e.lcZ(20,14,t.lastVisit)),e.xp6(3),e.Oqu(t.address),e.xp6(2),e.Oqu(t.phone),e.xp6(2),e.Q6J("ngModel",t.active)}}function q(o,l){if(1&o&&e.YNc(0,y,30,16,"tr"),2&o){const t=e.oxw(2);e.um2(0,t.customers.length>0?0:-1)}}const I=()=>({"min-width":"50rem"}),N=()=>[5,10,20],S=()=>["name"];function F(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"p-table",1),e.NdJ("selectionChange",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.selectedCustomers=s)}),e.YNc(1,U,38,0,"ng-template",2)(2,q,1,1,"ng-template",3),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("value",t.customers)("tableStyle",e.DdM(8,I))("paginator",!0)("rows",5)("selectionPageOnly",!0)("selection",t.selectedCustomers)("rowsPerPageOptions",e.DdM(9,N))("globalFilterFields",e.DdM(10,S))}}function D(o,l){if(1&o&&e._UZ(0,"p-messages",31),2&o){const t=e.oxw();e.Q6J("value",t.messages)("enableService",!1)("closable",!1)}}let k=(()=>{class o{constructor(t){this.http=t,this.customers=[],this.deleteCustomer=new e.vpe,this.updateCustomer=new e.vpe,this.activeChange=new e.vpe,this.messages=[{severity:"info",summary:"Lista vacia",detail:"No hay clientes por mostrar"}]}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(x.eN))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-customer-list"]],inputs:{customers:"customers"},outputs:{deleteCustomer:"deleteCustomer",updateCustomer:"updateCustomer",activeChange:"activeChange"},standalone:!0,features:[e.jDz],decls:2,vars:1,consts:[["styleClass","p-datatable-striped",3,"value","tableStyle","paginator","rows","selectionPageOnly","selection","rowsPerPageOptions","globalFilterFields"],["styleClass","p-datatable-striped",3,"value","tableStyle","paginator","rows","selectionPageOnly","selection","rowsPerPageOptions","globalFilterFields","selectionChange"],["pTemplate","header"],["pTemplate","body"],[2,"width","3rem"],["pSortableColumn","id"],["field","id"],["pSortableColumn","name"],["field","name"],["pSortableColumn","lastName"],["field","lastName"],["pSortableColumn","email"],["field","email"],["pSortableColumn","cardId"],["field","cardId"],["pSortableColumn","gender"],["field","gender"],["pSortableColumn","birthDay"],["field","birthDay"],["pSortableColumn","lastVisit"],["field","lastVisit"],["pSortableColumn","address"],["field","address"],["pSortableColumn","phone"],["field","phone"],["pSortableColumn","active"],["field","active"],[3,"value"],[3,"ngModel","ngModelChange","onChange"],["pButton","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success",3,"click"],["pButton","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger",3,"click"],[3,"value","enableService","closable"]],template:function(i,s){1&i&&e.YNc(0,F,3,11,"p-table",0)(1,D,1,3),2&i&&e.um2(0,s.customers.length>0?0:1)},dependencies:[c.ez,u.U$,u.iA,p.jx,u.lQ,u.fz,u.UA,u.Mo,d.hJ,d.Hq,v.$,v.V,A.W,a.u5,a.JJ,a.On,g.Iu,g.Ql],styles:["[_nghost-%COMP%]{display:block}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0})}return o})();var b=n(7213),f=n(3714),w=n(4819),Z=n(1532),O=n(122);function J(o,l){1&o&&(e.TgZ(0,"span",26),e._uU(1,"El nombre es obligatorio"),e.qZA())}function L(o,l){1&o&&(e.TgZ(0,"span",26),e._uU(1,"El apellido es obligatorio"),e.qZA())}function M(o,l){1&o&&(e.TgZ(0,"span",26),e._uU(1,"El correo es obligatorio \xf3 ya en uso"),e.qZA())}function E(o,l){1&o&&(e.TgZ(0,"span",26),e._uU(1,"El documento es obligatorio"),e.qZA())}function V(o,l){if(1&o&&(e.TgZ(0,"div",27),e._UZ(1,"input",28),e.TgZ(2,"label",29),e._uU(3),e.qZA()()),2&o){const t=l.$implicit;e.xp6(1),e.Q6J("id",t.key)("value",t.key),e.xp6(1),e.Q6J("for",t.key),e.xp6(1),e.Oqu(t.name)}}function Y(o,l){1&o&&(e.TgZ(0,"span",26),e._uU(1,"El g\xe9nero es obligatorio"),e.qZA())}function P(o,l){1&o&&(e.TgZ(0,"span",26),e._uU(1,"La fecha es obligatoria"),e.qZA())}function z(o,l){1&o&&(e.TgZ(0,"span",26),e._uU(1,"La fecha es obligatoria"),e.qZA())}function Q(o,l){1&o&&(e.TgZ(0,"span",26),e._uU(1,"La direcci\xf3n es obligatoria"),e.qZA())}function H(o,l){1&o&&(e.TgZ(0,"span",26),e._uU(1,"El tel\xe9fono es obligatorio"),e.qZA())}const G=()=>({width:"50rem"}),$=()=>({"1199px":"75vw","575px":"90vw"});let j=(()=>{class o{constructor(t,i){this.fb=t,this.emailValidator=i,this.customer=null,this.visibleChange=new e.vpe,this.saveCustomer=new e.vpe,this.customerForm=this.fb.group({name:["",[a.kI.required]],lastName:["",[a.kI.required]],email:["",[a.kI.required],[this.emailValidator.validate.bind(this.emailValidator)]],cardId:["",[a.kI.required]],gender:["",[a.kI.required]],birthDay:[new Date,[a.kI.required]],lastVisit:[new Date,[a.kI.required]],address:["",[a.kI.required]],phone:["",[a.kI.required]],active:[!0,[a.kI.required]]}),this.genders=[{key:"M",name:"Masculino"},{key:"F",name:"Femenino"}]}ngOnInit(){this.customer&&this.customerForm.patchValue({name:this.customer.name,lastName:this.customer.lastName,email:this.customer.email,cardId:this.customer.cardId,gender:this.customer.gender,birthDay:this.customer.birthDay,lastVisit:this.customer.lastVisit,address:this.customer.address,phone:this.customer.phone,active:this.customer.active})}validateInput(t){return this.customerForm.get(t).invalid&&this.customerForm.get(t).touched}submitCustomer(){if(this.customerForm.invalid)return this.customerForm.markAllAsTouched(),void this.customerForm.markAsDirty();const t={id:this.customer?.id||-1,name:this.customerForm.get("name").value,lastName:this.customerForm.get("lastName").value,email:this.customerForm.get("email").value,cardId:this.customerForm.get("cardId").value,address:this.customerForm.get("address").value,phone:this.customerForm.get("phone").value,gender:this.customerForm.get("gender").value,birthDay:this.customerForm.get("birthDay").value,lastVisit:this.customerForm.get("lastVisit").value,active:!!this.customerForm.get("active").value};this.saveCustomer.emit(t),this.visibleChange.emit(!1)}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(a.qu),e.Y36(O.o))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-update-customer"]],inputs:{customer:"customer",visible:"visible"},outputs:{visibleChange:"visibleChange",saveCustomer:"saveCustomer"},standalone:!0,features:[e.jDz],decls:53,vars:24,consts:[[3,"header","modal","draggable","resizable","visible","breakpoints","visibleChange","onHide"],[1,"pt-4",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","name",1,"font-semibold","block","mb-2"],["id","name","type","text","formControlName","name","pInputText","",1,"w-full"],["class","text-red-500 text-md block p-2"],["for","lastName",1,"font-semibold","block","mb-2"],["id","lastName","type","text","formControlName","lastName","pInputText","",1,"w-full"],["for","email",1,"font-semibold","block","mb-2"],["id","email","type","email","formControlName","email","pInputText","",1,"w-full"],["for","cardId",1,"font-semibold","block","mb-2"],["id","cardId","type","text","formControlName","cardId","pInputText","",1,"w-full"],["for","gender",1,"font-semibold","block","mb-2"],["class","field-checkbox",4,"ngFor","ngForOf"],["for","birthDay",1,"font-semibold","block","mb-2"],["formControlName","birthDay","dateFormat","dd/mm/yy"],["for","lastVisit",1,"font-semibold","block","mb-2"],["formControlName","lastVisit","dateFormat","dd/mm/yy"],["for","address",1,"font-semibold","block","mb-2"],["id","address","type","text","formControlName","address","pInputText","",1,"w-full"],["for","phone",1,"font-semibold","block","mb-2"],["id","phone","type","text","formControlName","phone","pInputText","",1,"w-full"],["for","active",1,"font-semibold","block","mb-2"],["formControlName","active"],[1,"pt-3","flex","justify-content-end"],["icon","pi pi-check","iconPos","right","type","submit","pAutoFocus","",3,"label","autofocus","disabled"],[1,"text-red-500","text-md","block","p-2"],[1,"field-checkbox"],["type","radio","formControlName","gender",3,"id","value"],[1,"ml-2",3,"for"]],template:function(i,s){1&i&&(e.TgZ(0,"p-dialog",0),e.NdJ("visibleChange",function(m){return s.visible=m})("onHide",function(){return s.visibleChange.emit(!1)}),e.TgZ(1,"form",1),e.NdJ("ngSubmit",function(){return s.submitCustomer()}),e.TgZ(2,"div",2)(3,"label",3),e._uU(4,"Nombre"),e.qZA(),e._UZ(5,"input",4),e.YNc(6,J,2,0,"span",5),e.qZA(),e.TgZ(7,"div",2)(8,"label",6),e._uU(9,"Apellido"),e.qZA(),e._UZ(10,"input",7),e.YNc(11,L,2,0,"span",5),e.qZA(),e.TgZ(12,"div",2)(13,"label",8),e._uU(14,"Correo"),e.qZA(),e._UZ(15,"input",9),e.YNc(16,M,2,0,"span",5),e.qZA(),e.TgZ(17,"div",2)(18,"label",10),e._uU(19,"Documento de Identidad"),e.qZA(),e._UZ(20,"input",11),e.YNc(21,E,2,0,"span",5),e.qZA(),e.TgZ(22,"div",2)(23,"label",12),e._uU(24,"G\xe9nero"),e.qZA(),e.YNc(25,V,4,4,"div",13)(26,Y,2,0,"span",5),e.qZA(),e.TgZ(27,"div",2)(28,"label",14),e._uU(29,"Fecha Nacimiento"),e.qZA(),e._UZ(30,"p-calendar",15),e.YNc(31,P,2,0,"span",5),e.qZA(),e.TgZ(32,"div",2)(33,"label",16),e._uU(34,"Fecha ultima visita"),e.qZA(),e._UZ(35,"p-calendar",17),e.YNc(36,z,2,0,"span",5),e.qZA(),e.TgZ(37,"div",2)(38,"label",18),e._uU(39,"Direcci\xf3n Residencia"),e.qZA(),e._UZ(40,"input",19),e.YNc(41,Q,2,0,"span",5),e.qZA(),e.TgZ(42,"div",2)(43,"label",20),e._uU(44,"Tel\xe9fono"),e.qZA(),e._UZ(45,"input",21),e.YNc(46,H,2,0,"span",5),e.qZA(),e.TgZ(47,"div",2)(48,"label",22),e._uU(49,"Activo"),e.qZA(),e._UZ(50,"p-inputSwitch",23),e.qZA(),e.TgZ(51,"div",24),e._UZ(52,"p-button",25),e.qZA()()()),2&i&&(e.Akn(e.DdM(22,G)),e.s9C("header",s.customer?"Actualizar cliente":"Agregar nuevo cliente"),e.Q6J("modal",!0)("draggable",!1)("resizable",!1)("visible",s.visible)("breakpoints",e.DdM(23,$)),e.xp6(1),e.Q6J("formGroup",s.customerForm),e.xp6(5),e.um2(6,s.validateInput("name")?6:-1),e.xp6(5),e.um2(11,s.validateInput("lastName")?11:-1),e.xp6(5),e.um2(16,s.validateInput("email")?16:-1),e.xp6(5),e.um2(21,s.validateInput("cardId")?21:-1),e.xp6(4),e.Q6J("ngForOf",s.genders),e.xp6(1),e.um2(26,s.validateInput("gender")?26:-1),e.xp6(5),e.um2(31,s.validateInput("birthDay")?31:-1),e.xp6(5),e.um2(36,s.validateInput("lastVisit")?36:-1),e.xp6(5),e.um2(41,s.validateInput("address")?41:-1),e.xp6(5),e.um2(46,s.validateInput("phone")?46:-1),e.xp6(6),e.s9C("label",s.customer?"Actualizar":"Guardar"),e.Q6J("autofocus",!0)("disabled",s.customerForm.invalid))},dependencies:[c.ez,c.sg,b.S,b.V,f.j,f.o,a.UX,a._Y,a.Fj,a._,a.JJ,a.JL,a.sg,a.u,w.O,d.zx,g.Iu,g.Ql,h.kW,Z._8,Z.f],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return o})();var T=n(4104),K=n(3159);function R(o,l){if(1&o&&e._UZ(0,"app-customer-list",9),2&o){const t=e.oxw();e.Q6J("customers",t.activeCustomers)}}function W(o,l){if(1&o&&e._UZ(0,"app-customer-list",9),2&o){const t=e.oxw();e.Q6J("customers",t.disableCustomers)}}function B(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"app-add-update-customer",10),e.NdJ("saveCustomer",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.saveCustomer(s))})("visibleChange",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.openAddCustomerDialog=s)}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("visible",t.openAddCustomerDialog)("customer",t.selectedCustomer())}}const X=[{path:"",component:(()=>{class o{constructor(t,i){this.customerService=t,this.messageService=i,this.openAddCustomerDialog=!1,this.customerList=(0,e.tdS)([]),this.selectedCustomer=(0,e.tdS)(null)}ngOnInit(){this.getCustomers()}get activeCustomers(){return this.customerList().filter(t=>t.active)}get disableCustomers(){return this.customerList().filter(t=>!t.active)}get clientesList(){return this.customerList()}getCustomers(){this.customerService.getCustomers().subscribe({next:t=>{this.customerList.set(t)},error:t=>{console.log(t)}})}saveCustomer(t){-1===t.id?this.saveNewCustomer(t):this.updateCustomer(t)}saveNewCustomer(t){this.customerService.saveCustomer({id:t.id,name:t.name,lastName:t.lastName,email:t.email,cardId:t.cardId,gender:t.gender,birthDay:t.birthDay,active:t.active,lastVisit:t.lastVisit,address:t.address,phone:t.phone}).subscribe({next:()=>{this.getCustomers(),this.messageService.clear(),this.messageService.add({severity:"success",summary:"Agregado",detail:"Se ha registrado el cliente con \xe9xito"})},error:s=>{this.messageService.clear(),this.messageService.add({severity:"error",summary:"Error :(",detail:"Ha ocurrido un error inesperado. Intentelo de nuevo"}),console.log(s)}})}deleteCustomer(t){this.customerService.deleteCustomer(t).subscribe({next:()=>{this.getCustomers(),this.messageService.clear(),this.messageService.add({severity:"success",summary:"Eliminado",detail:"Se ha eliminado el cliente con \xe9xito"})},error:i=>{this.messageService.clear(),this.messageService.add({severity:"error",summary:"Error :(",detail:"Ha ocurrido un error inesperado. Intentelo de nuevo"}),console.log(i)}})}updateCustomer(t){this.customerService.updateCustomer(t).subscribe({next:()=>{this.getCustomers(),this.messageService.clear(),this.messageService.add({severity:"success",summary:"Actualizado",detail:"Se ha actualizado el cliente con \xe9xito"})},error:i=>{this.messageService.clear(),this.messageService.add({severity:"error",summary:"Error :(",detail:"Ha ocurrido un error inesperado. Intentelo de nuevo"}),console.log(i)}})}setDeleteCustomerList(t){this.selectedCustomer.set(t)}getCustomersWithoutMessage(){this.customerService.getCustomers().subscribe({next:t=>{this.customerList.set(t)}})}activeChange(t){this.customerService.activeCustomer(t.id,t.active).subscribe({next:i=>{this.getCustomersWithoutMessage(),this.messageService.clear(),this.messageService.add({severity:"success",summary:"Cliente actualizado",detail:"El cliente se ha actualizado correctamente"})}})}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(K.$),e.Y36(p.ez))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-customer"]],standalone:!0,features:[e._Bn([p.ez]),e.jDz],decls:15,vars:4,consts:[[1,"card","flex","justify-content-between","align-items-center","px-4"],[1,"mb-0","text-2xl","md:text-3xl"],["label","Agregar","icon","pi pi-plus",3,"iconPos","outlined","onClick"],["header","Listado"],[3,"customers","deleteCustomer","deleteCustomers","activeChange","updateCustomer"],["header","Activos"],["pTemplate","content"],["header","Deshabilitados"],[3,"visible","customer"],[3,"customers"],[3,"visible","customer","saveCustomer","visibleChange"]],template:function(i,s){1&i&&(e.TgZ(0,"main")(1,"section",0)(2,"h2",1),e._uU(3,"Clientes"),e.qZA(),e.TgZ(4,"p-button",2),e.NdJ("onClick",function(){return s.openAddCustomerDialog=!0}),e.qZA()(),e.TgZ(5,"section")(6,"p-tabView")(7,"p-tabPanel",3)(8,"app-customer-list",4),e.NdJ("deleteCustomer",function(m){return s.deleteCustomer(m)})("deleteCustomers",function(m){return s.setDeleteCustomerList(m)})("activeChange",function(m){return s.activeChange(m)})("updateCustomer",function(m){return s.selectedCustomer.set(m),s.openAddCustomerDialog=!0}),e.qZA()(),e.TgZ(9,"p-tabPanel",5),e.YNc(10,R,1,1,"ng-template",6),e.qZA(),e.TgZ(11,"p-tabPanel",7),e.YNc(12,W,1,1,"ng-template",6),e.qZA()()(),e.YNc(13,B,1,2,"app-add-update-customer",8),e._UZ(14,"p-toast"),e.qZA()),2&i&&(e.xp6(4),e.Q6J("iconPos","right")("outlined",!0),e.xp6(4),e.Q6J("customers",s.clientesList),e.xp6(5),e.um2(13,s.openAddCustomerDialog?13:-1))},dependencies:[c.ez,a.u5,d.hJ,d.zx,p.jx,C.LU,C.xf,C.x4,u.U$,h.kW,T.EV,T.FN,k,j],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})}return o})()}]}}]);